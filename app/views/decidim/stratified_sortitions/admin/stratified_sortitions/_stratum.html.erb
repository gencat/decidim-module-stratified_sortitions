<% stratum = form.object %>

<div class="card stratified-sortition-stratum" data-component="accordion" id="accordion-<%= id %>-field">
  <div class="card-divider stratum-divider">
    <h2 class="card-title flex items-center">
      <span>
        <%= icon("drag-move-2-fill") %>
        <%= dynamic_title(translated_attribute(stratum.name), class: "stratum-title-statement", max_length: 50, omission: "...", placeholder: t(".title")) %>
      </span>

      <div class="ml-auto flex flex-row-reverse items-center gap-x-4">
        <button type="button" class="stratum--collapse" data-controls="panel-<%= id %>-stratum-card">
          <span class="icon-collapse">
            <%== icon("arrow-up-s-line", role: "img") %>
          </span>

          <span class="icon-expand">
            <%== icon("arrow-down-s-line", role: "img") %>
          </span>
        </button>
        <button type="button" class="button button__sm button__transparent-secondary small alert move-up-stratum button--title">
          <%= icon "arrow-up-line" %> <%= t(".up") %>
        </button>

        <button type="button" class="button button__sm button__transparent-secondary small alert move-down-stratum button--title">
          <%= icon "arrow-down-line" %> <%= t(".down") %>
        </button>

        <button type="button" class="button button__sm button__transparent-secondary small alert remove-stratum button--title">
          <%= t(".remove") %>
        </button>
      </div>
    </h2>
  </div>

  <div id="panel-<%= id %>-stratum-card" class="card-divider collapsible">
    <div class="card-section stratum-fields">
      <div class="translated-field">
        <%= form.translated(
            :text_field,
            :name,
            tabs_id: id,
            label: t(".name"),
            maxlength: 100) %>
      </div>
      <div>
        <%= form.select :kind,
                        [[t("decidim.stratified_sortitions.admin.stratified_sortitions.stratum.kind.value"), "value"],
                        [t("decidim.stratified_sortitions.admin.stratified_sortitions.stratum.kind.numeric_range"), "numeric_range"]],
                        label: t("decidim.stratified_sortitions.admin.stratified_sortitions.stratum.kind.title") %>
      </div>
    </div>
    <%= form.hidden_field :position, value: form.object.position || 0 %>
    <%= form.hidden_field :deleted, value: false %>

    <% blank_substratum = Decidim::StratifiedSortitions::Admin::SubstratumForm.new(stratum: stratum) %>
    <%= render "substrata",
        form: form,
        stratum: stratum,
        blank_substratum: blank_substratum %>
  </div>
</div>
